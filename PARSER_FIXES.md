# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ Telegram –∫–∞–Ω–∞–ª–æ–≤

## üî¥ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä—Å–µ—Ä –ø–æ–ª—É—á–∞–ª —Ç–æ–ª—å–∫–æ 1-2 —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞.

**–ü—Ä–∏—á–∏–Ω–∞:** 
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `offset_date` –≤ `iter_messages()`
- –ü–∞—Ä–∞–º–µ—Ç—Ä `offset_date` —É–∫–∞–∑—ã–≤–∞–µ—Ç "–Ω–∞—á–∞—Ç—å —Å —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞", –Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `if message.date < offset_date: break` –ø—Ä–µ—Ä—ã–≤–∞–ª–∞ —Ü–∏–∫–ª —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `offset_date` –∏–∑ `iter_messages()`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞: –∏—Ç–µ—Ä–∞—Ü–∏—è –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥–∞—Ç—ã

```python
# –ë—ã–ª–æ:
async for message in self.telegram_client.iter_messages(channel, offset_date=offset_date):
    messages.append(message)
    if message.date < offset_date:
        break

# –°—Ç–∞–ª–æ:
async for message in self.telegram_client.iter_messages(channel):
    if message.date < cutoff_date:
        break
    messages.append(message)
```

### 2. –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å—Ç—ã, –Ω–µ –ø—Ä–æ—à–µ–¥—à–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã (–ø–æ —Ö–µ—à—Ç–µ–≥–∞–º, –¥–∞—Ç–µ –∏ —Ç.–¥.), —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ MongoDB —Å –ø–æ–ª–µ–º `filtered_reason`.

**–†–µ—à–µ–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ –ë–î. –ú–µ—Ç–æ–¥ `_process_post` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- `None` - –µ—Å–ª–∏ –ø–æ—Å—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
- `Dict` - –µ—Å–ª–∏ –ø–æ—Å—Ç –≤–∞–ª–∏–¥–µ–Ω (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)

### 3. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë—ã–ª–æ —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –ø–æ—Å—Ç—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ü–æ–∫–∞–∑ –ø—Ä–∏—á–∏–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å –ø—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞
- –•–µ—à—Ç–µ–≥–∏ –ø–æ—Å—Ç–∞ –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–∞–Ω–∞–ª—É –æ—Ç–¥–µ–ª—å–Ω–æ

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –¢–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç—Å—è **–≤—Å–µ** —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –º–µ—Å—è—Ü–µ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Telegram

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤
- ‚úÖ –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ—Å—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã –Ω–µ –∑–∞—Å–æ—Ä—è—é—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
- ‚úÖ –ü–æ–∫–∞–∑ –ø—Ä–µ–≤—å—é —Ç–µ–∫—Å—Ç–∞ (–ø–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–∞–Ω–∞–ª—É –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ emoji-–º–∞—Ä–∫–µ—Ä—ã –≤ –ª–æ–≥–∞—Ö

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–∞–Ω–∞–ª—É –≤ –∫–æ–Ω—Ü–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤

–ü–æ—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏**:
1. ‚úÖ –ü—Ä–æ—à–µ–ª —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ö–µ—à—Ç–µ–≥–∞–º (whitelist/blacklist)
2. ‚úÖ –í —Ç–µ–∫—Å—Ç–µ –Ω–∞–π–¥–µ–Ω–∞ –¥–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è
3. ‚úÖ –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è **—Å–µ–≥–æ–¥–Ω—è –∏–ª–∏ –≤ –±—É–¥—É—â–µ–º**

–ü–æ—Å—Ç **–ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** –µ—Å–ª–∏:
- ‚ùå –ù–µ –ø—Ä–æ—à–µ–ª whitelist (–Ω–µ—Ç –Ω—É–∂–Ω—ã—Ö —Ö–µ—à—Ç–µ–≥–æ–≤)
- ‚ùå –ü–æ–ø–∞–ª –≤ blacklist (–µ—Å—Ç—å –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Ö–µ—à—Ç–µ–≥–∏)
- ‚ùå –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Ç–µ–∫—Å—Ç–µ
- ‚ùå –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ –ø—Ä–æ—à–ª–æ–º
- ‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `parser.py`

1. **–ú–µ—Ç–æ–¥ `parse_channel()`** (—Å—Ç—Ä–æ–∫–∏ 368-405):
   - –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞–Ω–∞–ª—É
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **–ú–µ—Ç–æ–¥ `_process_post()`** (—Å—Ç—Ä–æ–∫–∏ 174-268):
   - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `original_channel` –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –ò–∑–º–µ–Ω–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç: `None` –≤–º–µ—Å—Ç–æ —Å–ª–æ–≤–∞—Ä—è —Å `filtered_reason`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–Ω–∞–ª–∞

3. **–ú–µ—Ç–æ–¥ `_save_post()`** (—Å—Ç—Ä–æ–∫–∏ 270-289):
   - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ—Å—Ç—ã)
   - –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `filtered_reason`

4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (—Å—Ç—Ä–æ–∫–∏ 52-64):
   - –î–æ–±–∞–≤–ª–µ–Ω —Å—á–µ—Ç—á–∏–∫ `skipped_no_text`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–Ω–∞–ª–∞–º `channel_stats`

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä —Å–Ω–æ–≤–∞**: `python run_parser.py`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: —Ç–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º –ø–æ—Å—Ç–µ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ MongoDB**: –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `raw_posts` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ—Å—Ç—ã

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –ì–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—É—á–µ–Ω–æ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ (–¥–µ—Å—è—Ç–∫–∏/—Å–æ—Ç–Ω–∏ –≤–º–µ—Å—Ç–æ 1-2)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞–∂–¥–æ–º—É –∫–∞–Ω–∞–ª—É
- ‚úÖ –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ—Å—Ç—ã –≤ MongoDB

## üîç –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤

```
–ù–∞—á–∏–Ω–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞–Ω–∞–ª–∞: –ö—É–¥–∞ –ü–æ–π—Ç–∏ –≤ –ö–∞–∑–∞–Ω–∏ (ID: 1088252923)
–ü–∞—Ä—Å–∏–Ω–≥ –ø–æ—Å—Ç–æ–≤ —Å 2025-08-25 (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å.)
–ü–æ–ª—É—á–µ–Ω–æ 150 —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∫–∞–Ω–∞–ª–∞
–ü—Ä–æ–ø—É—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏—è 12345: –Ω–µ—Ç —Ç–µ–∫—Å—Ç–∞
–ü–æ—Å—Ç 12346 –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω –ø–æ —Ö–µ—à—Ç–µ–≥–∞–º: not_in_whitelist | —Ö–µ—à—Ç–µ–≥–∏: ['–∫–∏–Ω–æ', '—Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è']
–ü–æ—Å—Ç 12347: –¥–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ | —Ç–µ–∫—Å—Ç: –ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ...
–ü–æ—Å—Ç 12348: –¥–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ –ø—Ä–æ—à–ª–æ–º (2025-11-15) | —Ç–µ–∫—Å—Ç: 15 –Ω–æ—è–±—Ä—è —Å–æ—Å—Ç–æ—è–ª—Å—è –∫–æ–Ω—Ü–µ—Ä—Ç...
‚úÖ –ü–æ—Å—Ç 12349 –ø—Ä–æ—à–µ–ª —Ñ–∏–ª—å—Ç—Ä—ã | –¥–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è: 2025-11-30 | —Ö–µ—à—Ç–µ–≥–∏: ['—Å–æ–±—ã—Ç–∏–µ', '–∫–æ–Ω—Ü–µ—Ä—Ç']
–ü–æ—Å—Ç 12349 —Å–æ—Ö—Ä–∞–Ω–µ–Ω: 2025-11-30 00:00:00
```

